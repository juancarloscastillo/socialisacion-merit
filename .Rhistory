setwd("~/GitHub/merit-scale")
# for render in pdf run rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
# clean #in the yml
rmarkdown::render("docs/paper.Rmd", output_format = "bookdown::pdf_document2")
setwd("~/GitHub/socialisacion-merit")
setwd("~/GitHub/socialisacion-merit")
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE,out.width = '85%',fig.pos= "H")
# knitr::opts_knit$set(base.url = "../") #relative path for .html output file
# knitr::opts_knit$set(root.dir = "../") #relative path for chunks within .rmd files
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
options(knitr.graphics.error = FALSE)
Sys.setlocale("LC_ALL", "ES_ES.UTF-8")
tab02 <- read.csv(file = "../input/prereg/table02.csv",header = 1,sep = ";",encoding = "UTF-8")
kable(tab02,table_format,booktabs = T, linesep = "",col.names =  c("Variable","Pregunta","CategorÃ­as de respuesta"), caption = cap2) %>%
kable_styling(
full_width = T,
latex_options = c("hold_position"),
position = "center",
font_size = 10,
bootstrap_options=c("striped", "bordered")) %>%
column_spec(column = 1, width = "3 cm", ) %>%
column_spec(column = 2,width = "7 cm") %>%
column_spec(column = 3,width = "4 cm") %>%
collapse_rows(columns = 1:2,valign = "middle")
tab02 <- read.csv(file = "../input/prereg/table02.csv",header = 1,sep = ";",encoding = "UTF-8")
library(haven)
Base_Apoderados_v2 <- read_dta("~/GitHub/Fondecyt-Ciudadania/input/data/Base Apoderados v2.dta")
View(Base_Apoderados_v2)
table(Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==1,100000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==2,117500,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==3,156500,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==4,201500,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==5,257500,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==6,324500,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==7,724000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==8,1500000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==9,2500000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==10,3000000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55=>10,NA,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55>=10,NA,Base_Apoderados_v2$P55)
table(Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==1,100000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==2,117500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==3,156500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==4,201500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==5,257500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==6,324500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==7,724000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==8,1500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==9,2500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==10,3500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55>=10,NA,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55>=10,NA,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==10,3500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==1,100000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==2,117500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==3,156500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==4,201500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==5,257500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==6,324500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==7,724000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==8,1500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==9,2500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==10,3500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55>=10,NA,Base_Apoderados_v2$ing)
table(Base_Apoderados_v2$ing)
table(Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==1,100000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==2,117500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==3,156500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==4,201500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==5,257500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==6,324500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==7,724000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==8,1500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==9,2500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==10,3500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55>=10,NA,Base_Apoderados_v2$ing)
table(Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==2,117500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==3,156500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==4,201500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==5,257500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==6,324500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==7,724000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==8,1500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==9,2500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==10,3500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55>=11,NA,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==1,100000,Base_Apoderados_v2$P55)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==2,117500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==3,156500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==4,201500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==5,257500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==6,324500,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==7,724000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==8,1500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==9,2500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55==10,3500000,Base_Apoderados_v2$ing)
Base_Apoderados_v2$ing<-ifelse(Base_Apoderados_v2$P55>=11,NA,Base_Apoderados_v2$ing)
table(Base_Apoderados_v2$ing)
summary(Base_Apoderados_v2$ing)
Base_Apoderados_v2 <- Base_Apoderados_v2 %>%
group_by(RBD) %>%
mutate(m_nsef = mean(ing))
summary(Base_Apoderados_v2$m_nsef)
hist(Base_Apoderados_v2$m_nsef)
hist(Base_Apoderados_v2$m_nsef)
setwd("~/GitHub/socialisacion-merit")
sjPlot::view_df(Base_Apoderados_v2)
table(Base_Apoderados_v2$P45)
Base_Apoderados_v2$univ<- ifelse(Base_Apoderados_v2$P45==4,1,0)
Base_Apoderados_v2 <- Base_Apoderados_v2 %>%
group_by(RBD) %>%
mutate(m_univ = mean(univ))
table(Base_Apoderados_v2$univ)
summary(Base_Apoderados_v2$m_univ)
hist(Base_Apoderados_v2$m_univ)
