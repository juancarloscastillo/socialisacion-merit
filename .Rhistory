mutate(heterogen_esc = sd(ingresos))
# Cuestionario apoderados
frq(ap_proc$libros_hogar)
# Cuestionario estudiantes
frq(est_proc$libros_hogar)
# Cuestionarios apoderados
ap_proc$libros_hogar <- set_na(ap_proc$libros_hogar, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$libros_hogar <- set_na(est_proc$libros_hogar, na = c(9,8), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$libros_hogar <- set_label(x = ap_proc$libros_hogar, label = "Libros en el hogar apoderados")
# Cuestionaro estudiantes
est_proc$libros_hogar <- set_label(x = est_proc$libros_hogar, label = "Libros en el hogar estudiantes")
frq(ap_proc$personas_hogar)
ap_proc$personas_hogar <- set_na(ap_proc$personas_hogar, na = c(999), drop.levels = TRUE, as.tag = FALSE)
ap_proc$personas_hogar <- set_label(x = ap_proc$personas_hogar, label = "Cantidad de personas en el hogar")
# Cuestionario apoderados
frq(ap_proc$recompensa_hijos)
# Cuestionario estudiante
frq(est_proc$recompensa)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_na(ap_proc$recompensa_hijos, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$recompensa <- set_na(ap_proc$recompensa, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_label(x = ap_proc$recompensa_hijos, label = "Recompensa en la escuela apoderados")
# Cuestionario estudiantes
est_proc$recompensa <- set_label(x = est_proc$recompensa, label = "Recompensa en la escuela estudiantes")
# Guardar base de datos apoderados
save(ap_proc, file = "input/data/ap_proc.RData")
knitr::opts_chunk$set(echo = TRUE)
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, SciViews, summarytools)
# Bases de apoderados.
ap <- haven::read_dta("https://github.com/formacionciudadana/data-paces/raw/main/docs/paces/data/base_apoderadosv2.dta")
# Base de estudiantes.
est <- haven::read_dta("https://github.com/formacionciudadana/data-paces/raw/main/docs/paces/data/base_estudiantesv2.dta")
# Seleccionar  y renombrar variables de la base de datos de apoderados
ap_proc <- ap %>% dplyr::select(rbd = RBD,
region = REGION,
dependencia = Dependencia,
pos_pol = P23,
genero = P39,
nacimiento = P40A,
personas_hogar = P41,
educ = P45,
ingresos_tramos = P55,
libros_hogar = P47,
perc_trabajo_duro = P9D,
perc_get_ahead = P10D,
recompensa_hijos = P10C
)
# Seleccionar y renonbrar variables de la base de datos de estudiantes.
est_proc <- est  %>% dplyr::select(rbd = RBD,
region = REGION,
dependencia = Dependencia,
pos_pol = P59,
genero = P58,
educ_padre = P66,
educ_madre = P67,
libros_hogar = P68,
perc_trabajo_duro = P24D,
perc_get_ahead = P25D,
prom_obt = P27,
prom_mer = P28,
sj_direct = P29,
recompensa = P25C
)
frq(est_proc$perc_trabajo_duro) # Frecuencias
est_proc$perc_trabajo_duro <- set_na(est_proc$perc_trabajo_duro, na = c(5,9), drop.levels = TRUE, as.tag = FALSE) # Transformar a NA
est_proc$perc_trabajo_duro <- set_label(x = est_proc$perc_trabajo_duro,label = "Percepcion meritocracia: trabajo duro") # Etiquetar
frq(est_proc$perc_get_ahead)
est_proc$perc_get_ahead <- set_na(est_proc$perc_get_ahead, na = c(5,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$perc_get_ahead <- set_label(x = est_proc$perc_get_ahead, label = "Percepcion meritocracia: get ahead")
frq(ap_proc$perc_trabajo_duro)
ap_proc$perc_trabajo_duro <- set_na(ap_proc$perc_trabajo_duro, na = c(9), drop.levels = TRUE, as.tag = FALSE)
ap_proc$perc_trabajo_duro <- set_label(x = ap_proc$perc_trabajo_duro,label = "Percepcion meritocracia: trabajo duro")
frq(ap_proc$perc_get_ahead)
ap_proc$perc_get_ahead <- set_na(ap_proc$perc_get_ahead, na = c(5), drop.levels = TRUE, as.tag = FALSE)
ap_proc$perc_get_ahead <- set_label(x = ap_proc$perc_get_ahead, label = "Percepcion meritocracia: get ahead")
# Promedio obtenido
frq(est_proc$prom_obt) # Frecuencias
summary(est_proc$prom_obt) # Descriptivos
# Promedio merecido
frq(est_proc$prom_mer)
summary(est_proc$prom_mer)
# Promedio obtenido
est_proc$prom_obt <- set_na(est_proc$prom_obt, na = c(99), drop.levels = TRUE, as.tag = FALSE)
est_proc$prom_obt[est_proc$prom_obt < 1 | est_proc$prom_obt > 7] <- NA
# Promedio merecido
est_proc$prom_mer <- set_na(est_proc$prom_mer, na = c(99), drop.levels = TRUE, as.tag = FALSE)
est_proc$prom_mer[est_proc$prom_mer < 1 | est_proc$prom_mer > 7] <- NA
# Promedio obtenido
est_proc$prom_obt <- set_label(x = est_proc$prom_obt, label = "Promedio obtenido")
# Promedio merecido
est_proc$prom_mer <- set_label(x = est_proc$prom_mer, label = "Promedio merecido")
# Cálculo sentido justicia original
est_proc$sj_indirect_ln <-  ln(est_proc$prom_obt/est_proc$prom_mer)
# Cálculo sentido justicia sin ln
est_proc$sj_indirect_noln <-  est_proc$prom_obt/est_proc$prom_mer
##### ---- Descriptivos variables nuevas ----
# Sentido de justicia
summary(est_proc$sj_indirect_ln)
frq(est_proc$sj_indirect_ln)
# Sentido de justicia sin ln
summary(est_proc$sj_indirect_noln)
frq(est_proc$sj_indirect_noln)
##### ---- Etiquetado varibles nuevas ----
# Sentido de justicia
est_proc$sj_indirect_ln <- set_label(x = est_proc$sj_indirect_ln, label = "Sentido de justicia indirecto")
# Sentido de justicia sin ln
est_proc$sj_indirect_noln <- set_label(x = est_proc$sj_indirect_ln, label = "Sentido de justicia indirecto SIN LN")
frq(est_proc$sj_direct)
summary(est_proc$sj_direct)
est_proc$sj_direct <- set_na(est_proc$sj_direct, na = c(4,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$sj_direct <- set_label(x = est_proc$sj_direct, label = "Sentido de justicia directo")
frq(ap_proc$ingresos_tramos)
summary(ap_proc$ingresos_tramos)
ap_proc$ingresos_tramos <- set_na(ap_proc$ingresos_tramos, na = c(12,13), drop.levels = TRUE, as.tag = FALSE)
ap_proc$ingresos_tramos <- set_label(x = ap_proc$ingresos_tramos,label = "Ingresos del hogar en tramos")
# Construcción ingresos numerico
ap_proc$ingresos[ap_proc$ingresos_tramos == 1] <- 100000
ap_proc$ingresos[ap_proc$ingresos_tramos == 2] <- 117500
ap_proc$ingresos[ap_proc$ingresos_tramos == 3] <- 156500
ap_proc$ingresos[ap_proc$ingresos_tramos == 4] <- 201500
ap_proc$ingresos[ap_proc$ingresos_tramos == 5] <- 257500
ap_proc$ingresos[ap_proc$ingresos_tramos == 6] <- 324500
ap_proc$ingresos[ap_proc$ingresos_tramos == 7] <- 724000
ap_proc$ingresos[ap_proc$ingresos_tramos == 8] <- 1500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 9] <- 2500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 10] <- 3500000
ap_proc$ingresos[ap_proc$ingresos_tramos >= 11] <- NA
# Construcción ingreso per capita
ap_proc$ingresos_pc <- ap_proc$ingresos/ap_proc$personas_hogar
ap_proc$ingresos_pc <- trunc(ap_proc$ingresos_pc)
# ---- Descripción variables nuevas ----
# ingreso
summary(ap_proc$ingresos)
# ingreso per capita
summary(ap_proc$ingresos_pc)
#---- Etiquetado variables nuevas ----
#ingreso
ap_proc$ingresos <- set_label(x = ap_proc$ingresos, label = "Ingresos del hogar")
# ingreso per capita
ap_proc$ingresos_pc <- set_label(x = ap_proc$ingresos_pc, label = "Ingreso per capita")
# Cuestionario apoderados
frq(ap_proc$educ)
# Cuestionario estudiantes
frq(est_proc$educ_madre)
frq(est_proc$educ_padre)
# Cuestionario apoderados
ap_proc$educ <- set_na(ap_proc$educ, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$educ_madre <- set_na(est_proc$educ_madre, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$educ_padre <- set_na(est_proc$educ_padre, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$educ <- set_label(x = ap_proc$educ, label = "Educacion del apoderado")
# Cuestionario estudiantes
est_proc$educ_madre <- set_label(x = est_proc$educ_madre, label = "Educacion de la madre")
est_proc$educ_padre <- set_label(x = est_proc$educ_padre, label = "Educacion de la madre")
# Ingresos a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_esc = mean(ingresos))
# Ingresos per capita a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_pc_esc = mean(ingresos))
#---- Descriptivos variables nuevas----
# Ingresos a nivel escuela
summary(ap_proc$ingresos_esc)
# Ingresos per capita a nivel escuela
summary(ap_proc$ingresos_pc_esc)
#---- Etiquetado variables nuevas----
# Ingresos a nivel escuela
ap_proc$ingresos_esc <- set_label(x = ap_proc$ingresos_esc, label = "Ingresos por escuela")
# Ingresos per capita a nivel escuela
ap_proc$ingresos_pc_esc <- set_label(x = ap_proc$ingresos_pc_esc, label = "Ingreso per capita por escuela")
# Construcción educación terciara apoderado por escuela
ap_proc$univ<- ifelse(ap_proc$educ==4,1,0)
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(univ_esc = mean(univ))
# ---- Descriptivos nuevas variables ----
frq(ap_proc$univ)
summary(ap_proc$univ_esc)
#---- Etiquetado nuevas variables ----
ap_proc$univ <- set_label(x = ap_proc$univ, label = "Educacion terciaria")
ap_proc$univ_esc <- set_label(x = ap_proc$univ_esc, label = "Porcentaje ed. terciaria por escuela")
# Edad apoderados
frq(ap_proc$nacimiento)
ap_proc$nacimiento <- set_na(ap_proc$nacimiento, na = c(9999), drop.levels = TRUE, as.tag = FALSE)
ap_proc$nacimiento <- set_label(x = ap_proc$nacimiento, label = "Nacimiento")
# Crear variable edad
ap_proc$edad <- 2019 - ap_proc$nacimiento
# ---- Descriptivo nueva variable ----
summary(ap_proc$edad)
# ---- Etiquetado variables nuevas ----
ap_proc$edad <- set_label(x = ap_proc$edad, label = "Edad")
# Genero apoderados
frq(ap_proc$genero)
# Genero estudiantes
frq(est_proc$genero)
# Genero estudiantes
est_proc$genero <- set_na(est_proc$genero, na = c(4,9), drop.levels = TRUE, as.tag = FALSE)
# Genero apoderados
ap_proc$genero <- set_label(x = ap_proc$genero, label = "Genero apoderados")
# Genero estudiantes
est_proc$genero <- set_label(x = est_proc$genero, label = "Genero estudiantes")
# Posición política apoderados
frq(ap_proc$pos_pol)
summary(ap_proc$pos_pol)
# Posición política estudiantes
frq(est_proc$pos_pol)
summary(est_proc$pos_pol)
# Posicion politica apoderados
ap_proc$pos_pol<- set_na(ap_proc$pos_pol, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Posicion politica estudiantes
est_proc$pos_pol<- set_na(est_proc$pos_pol, na = c(9,88), drop.levels = TRUE, as.tag = FALSE)
# Posición política apoderados
ap_proc$pos_pol <- set_label(x = ap_proc$pos_pol, label = "Posicion politica apoderados")
# Posición política apoderados
est_proc$pos_pol <- set_label(x = est_proc$pos_pol, label = "Posicion politica estudiantes")
# Cuestionario apoderados
frq(ap_proc$region)
# Cuestionario estudiantes
frq(est_proc$region)
# Region
# Cuestionario apoderados
ap_proc$region <- set_label(x = ap_proc$region, label = "Region")
# Cuestionario estudiantes
est_proc$region <- set_label(x = est_proc$region, label = "Region")
# Cuesitionarios apoderados
frq(ap_proc$dependencia)
summary(ap_proc$dependencia)
# Cuestionario estudiantes
frq(est_proc$dependencia)
summary(est_proc$dependencia)
# Construccion heterogeneidad
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(heterogen_esc = sd(ingresos))
# Cuestionario apoderados
frq(ap_proc$libros_hogar)
# Cuestionario estudiantes
frq(est_proc$libros_hogar)
# Cuestionarios apoderados
ap_proc$libros_hogar <- set_na(ap_proc$libros_hogar, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$libros_hogar <- set_na(est_proc$libros_hogar, na = c(9,8), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$libros_hogar <- set_label(x = ap_proc$libros_hogar, label = "Libros en el hogar apoderados")
# Cuestionaro estudiantes
est_proc$libros_hogar <- set_label(x = est_proc$libros_hogar, label = "Libros en el hogar estudiantes")
frq(ap_proc$personas_hogar)
ap_proc$personas_hogar <- set_na(ap_proc$personas_hogar, na = c(999), drop.levels = TRUE, as.tag = FALSE)
ap_proc$personas_hogar <- set_label(x = ap_proc$personas_hogar, label = "Cantidad de personas en el hogar")
# Cuestionario apoderados
frq(ap_proc$recompensa_hijos)
# Cuestionario estudiante
frq(est_proc$recompensa)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_na(ap_proc$recompensa_hijos, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$recompensa <- set_na(ap_proc$recompensa, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_label(x = ap_proc$recompensa_hijos, label = "Recompensa en la escuela apoderados")
# Cuestionario estudiantes
est_proc$recompensa <- set_label(x = est_proc$recompensa, label = "Recompensa en la escuela estudiantes")
# Guardar base de datos apoderados
save(ap_proc, file = "../input/data/ap_proc.RData")
# Guardar base de datos estudiantes
save(est_proc, file = "../input/data/est_proc.RData")
knitr::opts_chunk$set(echo = TRUE)
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, SciViews, summarytools)
# Bases de apoderados.
ap <- haven::read_dta("https://github.com/formacionciudadana/data-paces/raw/main/docs/paces/data/base_apoderadosv2.dta")
# Base de estudiantes.
est <- haven::read_dta("https://github.com/formacionciudadana/data-paces/raw/main/docs/paces/data/base_estudiantesv2.dta")
# Seleccionar  y renombrar variables de la base de datos de apoderados
ap_proc <- ap %>% dplyr::select(rbd = RBD,
region = REGION,
dependencia = Dependencia,
pos_pol = P23,
genero = P39,
nacimiento = P40A,
personas_hogar = P41,
educ = P45,
ingresos_tramos = P55,
libros_hogar = P47,
perc_trabajo_duro = P9D,
perc_get_ahead = P10D,
recompensa_hijos = P10C
)
# Seleccionar y renonbrar variables de la base de datos de estudiantes.
est_proc <- est  %>% dplyr::select(rbd = RBD,
region = REGION,
dependencia = Dependencia,
pos_pol = P59,
genero = P58,
educ_padre = P66,
educ_madre = P67,
libros_hogar = P68,
perc_trabajo_duro = P24D,
perc_get_ahead = P25D,
prom_obt = P27,
prom_mer = P28,
sj_direct = P29,
recompensa = P25C
)
frq(est_proc$perc_trabajo_duro) # Frecuencias
est_proc$perc_trabajo_duro <- set_na(est_proc$perc_trabajo_duro, na = c(5,9), drop.levels = TRUE, as.tag = FALSE) # Transformar a NA
est_proc$perc_trabajo_duro <- set_label(x = est_proc$perc_trabajo_duro,label = "Percepcion meritocracia: trabajo duro") # Etiquetar
frq(est_proc$perc_get_ahead)
est_proc$perc_get_ahead <- set_na(est_proc$perc_get_ahead, na = c(5,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$perc_get_ahead <- set_label(x = est_proc$perc_get_ahead, label = "Percepcion meritocracia: get ahead")
frq(ap_proc$perc_trabajo_duro)
ap_proc$perc_trabajo_duro <- set_na(ap_proc$perc_trabajo_duro, na = c(9), drop.levels = TRUE, as.tag = FALSE)
ap_proc$perc_trabajo_duro <- set_label(x = ap_proc$perc_trabajo_duro,label = "Percepcion meritocracia: trabajo duro")
frq(ap_proc$perc_get_ahead)
ap_proc$perc_get_ahead <- set_na(ap_proc$perc_get_ahead, na = c(5), drop.levels = TRUE, as.tag = FALSE)
ap_proc$perc_get_ahead <- set_label(x = ap_proc$perc_get_ahead, label = "Percepcion meritocracia: get ahead")
# Promedio obtenido
summary(est_proc$prom_obt) # Descriptivos
# Promedio merecido
summary(est_proc$prom_mer)
# Promedio obtenido
est_proc$prom_obt <- set_na(est_proc$prom_obt, na = c(99), drop.levels = TRUE, as.tag = FALSE)
est_proc$prom_obt[est_proc$prom_obt < 1 | est_proc$prom_obt > 7] <- NA
# Promedio merecido
est_proc$prom_mer <- set_na(est_proc$prom_mer, na = c(99), drop.levels = TRUE, as.tag = FALSE)
est_proc$prom_mer[est_proc$prom_mer < 1 | est_proc$prom_mer > 7] <- NA
# Promedio obtenido
est_proc$prom_obt <- set_label(x = est_proc$prom_obt, label = "Promedio obtenido")
# Promedio merecido
est_proc$prom_mer <- set_label(x = est_proc$prom_mer, label = "Promedio merecido")
# Cálculo sentido justicia original
est_proc$sj_indirect_ln <-  ln(est_proc$prom_obt/est_proc$prom_mer)
# Cálculo sentido justicia sin ln
est_proc$sj_indirect_noln <-  est_proc$prom_obt/est_proc$prom_mer
##### ---- Descriptivos variables nuevas ----
# Sentido de justicia
summary(est_proc$sj_indirect_ln)
frq(est_proc$sj_indirect_ln)
# Sentido de justicia sin ln
summary(est_proc$sj_indirect_noln)
frq(est_proc$sj_indirect_noln)
##### ---- Etiquetado varibles nuevas ----
# Sentido de justicia
est_proc$sj_indirect_ln <- set_label(x = est_proc$sj_indirect_ln, label = "Sentido de justicia indirecto")
# Sentido de justicia sin ln
est_proc$sj_indirect_noln <- set_label(x = est_proc$sj_indirect_ln, label = "Sentido de justicia indirecto SIN LN")
frq(est_proc$sj_direct)
summary(est_proc$sj_direct)
est_proc$sj_direct <- set_na(est_proc$sj_direct, na = c(4,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$sj_direct <- set_label(x = est_proc$sj_direct, label = "Sentido de justicia directo")
frq(ap_proc$ingresos_tramos)
summary(ap_proc$ingresos_tramos)
ap_proc$ingresos_tramos <- set_na(ap_proc$ingresos_tramos, na = c(12,13), drop.levels = TRUE, as.tag = FALSE)
ap_proc$ingresos_tramos <- set_label(x = ap_proc$ingresos_tramos,label = "Ingresos del hogar en tramos")
# Construcción ingresos numerico
ap_proc$ingresos[ap_proc$ingresos_tramos == 1] <- 100000
ap_proc$ingresos[ap_proc$ingresos_tramos == 2] <- 117500
ap_proc$ingresos[ap_proc$ingresos_tramos == 3] <- 156500
ap_proc$ingresos[ap_proc$ingresos_tramos == 4] <- 201500
ap_proc$ingresos[ap_proc$ingresos_tramos == 5] <- 257500
ap_proc$ingresos[ap_proc$ingresos_tramos == 6] <- 324500
ap_proc$ingresos[ap_proc$ingresos_tramos == 7] <- 724000
ap_proc$ingresos[ap_proc$ingresos_tramos == 8] <- 1500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 9] <- 2500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 10] <- 3500000
ap_proc$ingresos[ap_proc$ingresos_tramos >= 11] <- NA
# Construcción ingreso per capita
ap_proc$ingresos_pc <- ap_proc$ingresos/ap_proc$personas_hogar
ap_proc$ingresos_pc <- trunc(ap_proc$ingresos_pc)
# ---- Descripción variables nuevas ----
# ingreso
summary(ap_proc$ingresos)
# ingreso per capita
summary(ap_proc$ingresos_pc)
#---- Etiquetado variables nuevas ----
#ingreso
ap_proc$ingresos <- set_label(x = ap_proc$ingresos, label = "Ingresos del hogar")
# ingreso per capita
ap_proc$ingresos_pc <- set_label(x = ap_proc$ingresos_pc, label = "Ingreso per capita")
# Cuestionario apoderados
frq(ap_proc$educ)
# Cuestionario estudiantes
frq(est_proc$educ_madre)
frq(est_proc$educ_padre)
# Cuestionario apoderados
ap_proc$educ <- set_na(ap_proc$educ, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$educ_madre <- set_na(est_proc$educ_madre, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$educ_padre <- set_na(est_proc$educ_padre, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$educ <- set_label(x = ap_proc$educ, label = "Educacion del apoderado")
# Cuestionario estudiantes
est_proc$educ_madre <- set_label(x = est_proc$educ_madre, label = "Educacion de la madre")
est_proc$educ_padre <- set_label(x = est_proc$educ_padre, label = "Educacion de la madre")
# Ingresos a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_esc = mean(ingresos))
# Ingresos per capita a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_pc_esc = mean(ingresos))
#---- Descriptivos variables nuevas----
# Ingresos a nivel escuela
summary(ap_proc$ingresos_esc)
# Ingresos per capita a nivel escuela
summary(ap_proc$ingresos_pc_esc)
#---- Etiquetado variables nuevas----
# Ingresos a nivel escuela
ap_proc$ingresos_esc <- set_label(x = ap_proc$ingresos_esc, label = "Ingresos por escuela")
# Ingresos per capita a nivel escuela
ap_proc$ingresos_pc_esc <- set_label(x = ap_proc$ingresos_pc_esc, label = "Ingreso per capita por escuela")
# Construcción educación terciara apoderado por escuela
ap_proc$univ<- ifelse(ap_proc$educ==4,1,0)
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(univ_esc = mean(univ))
# ---- Descriptivos nuevas variables ----
frq(ap_proc$univ)
summary(ap_proc$univ_esc)
#---- Etiquetado nuevas variables ----
ap_proc$univ <- set_label(x = ap_proc$univ, label = "Educacion terciaria")
ap_proc$univ_esc <- set_label(x = ap_proc$univ_esc, label = "Porcentaje ed. terciaria por escuela")
# Edad apoderados
frq(ap_proc$nacimiento)
ap_proc$nacimiento <- set_na(ap_proc$nacimiento, na = c(9999), drop.levels = TRUE, as.tag = FALSE)
ap_proc$nacimiento <- set_label(x = ap_proc$nacimiento, label = "Nacimiento")
# Crear variable edad
ap_proc$edad <- 2019 - ap_proc$nacimiento
# ---- Descriptivo nueva variable ----
summary(ap_proc$edad)
# ---- Etiquetado variables nuevas ----
ap_proc$edad <- set_label(x = ap_proc$edad, label = "Edad")
# Genero apoderados
frq(ap_proc$genero)
# Genero estudiantes
frq(est_proc$genero)
# Genero estudiantes
est_proc$genero <- set_na(est_proc$genero, na = c(4,9), drop.levels = TRUE, as.tag = FALSE)
# Genero apoderados
ap_proc$genero <- set_label(x = ap_proc$genero, label = "Genero apoderados")
# Genero estudiantes
est_proc$genero <- set_label(x = est_proc$genero, label = "Genero estudiantes")
# Posición política apoderados
frq(ap_proc$pos_pol)
summary(ap_proc$pos_pol)
# Posición política estudiantes
frq(est_proc$pos_pol)
summary(est_proc$pos_pol)
# Posicion politica apoderados
ap_proc$pos_pol<- set_na(ap_proc$pos_pol, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Posicion politica estudiantes
est_proc$pos_pol<- set_na(est_proc$pos_pol, na = c(9,88), drop.levels = TRUE, as.tag = FALSE)
# Posición política apoderados
ap_proc$pos_pol <- set_label(x = ap_proc$pos_pol, label = "Posicion politica apoderados")
# Posición política apoderados
est_proc$pos_pol <- set_label(x = est_proc$pos_pol, label = "Posicion politica estudiantes")
# Cuestionario apoderados
frq(ap_proc$region)
# Cuestionario estudiantes
frq(est_proc$region)
# Region
# Cuestionario apoderados
ap_proc$region <- set_label(x = ap_proc$region, label = "Region")
# Cuestionario estudiantes
est_proc$region <- set_label(x = est_proc$region, label = "Region")
# Cuesitionarios apoderados
frq(ap_proc$dependencia)
summary(ap_proc$dependencia)
# Cuestionario estudiantes
frq(est_proc$dependencia)
summary(est_proc$dependencia)
# Construccion heterogeneidad
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(heterogen_esc = sd(ingresos))
# Cuestionario apoderados
frq(ap_proc$libros_hogar)
# Cuestionario estudiantes
frq(est_proc$libros_hogar)
# Cuestionarios apoderados
ap_proc$libros_hogar <- set_na(ap_proc$libros_hogar, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$libros_hogar <- set_na(est_proc$libros_hogar, na = c(9,8), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$libros_hogar <- set_label(x = ap_proc$libros_hogar, label = "Libros en el hogar apoderados")
# Cuestionaro estudiantes
est_proc$libros_hogar <- set_label(x = est_proc$libros_hogar, label = "Libros en el hogar estudiantes")
frq(ap_proc$personas_hogar)
ap_proc$personas_hogar <- set_na(ap_proc$personas_hogar, na = c(999), drop.levels = TRUE, as.tag = FALSE)
ap_proc$personas_hogar <- set_label(x = ap_proc$personas_hogar, label = "Cantidad de personas en el hogar")
# Cuestionario apoderados
frq(ap_proc$recompensa_hijos)
# Cuestionario estudiante
frq(est_proc$recompensa)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_na(ap_proc$recompensa_hijos, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$recompensa <- set_na(ap_proc$recompensa, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_label(x = ap_proc$recompensa_hijos, label = "Recompensa en la escuela apoderados")
# Cuestionario estudiantes
est_proc$recompensa <- set_label(x = est_proc$recompensa, label = "Recompensa en la escuela estudiantes")
# Guardar base de datos apoderados
save(ap_proc, file = "../input/data/ap_proc.RData")
# Guardar base de datos estudiantes
save(est_proc, file = "../input/data/est_proc.RData")
