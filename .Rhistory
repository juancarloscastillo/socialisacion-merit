ap_proc$ingresos[ap_proc$ingresos_tramos == 1] <- 50500
ap_proc$ingresos[ap_proc$ingresos_tramos == 2] <- 117500
ap_proc$ingresos[ap_proc$ingresos_tramos == 3] <- 156500
ap_proc$ingresos[ap_proc$ingresos_tramos == 4] <- 201500
ap_proc$ingresos[ap_proc$ingresos_tramos == 5] <- 257500
ap_proc$ingresos[ap_proc$ingresos_tramos == 6] <- 324500
ap_proc$ingresos[ap_proc$ingresos_tramos == 7] <- 403000
ap_proc$ingresos[ap_proc$ingresos_tramos == 8] <- 724000
ap_proc$ingresos[ap_proc$ingresos_tramos == 9] <- 1500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 10] <- 2500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 11] <- 3500000
# Construcción ingreso per capita
ap_proc$ingresos_pc <- ap_proc$ingresos/ap_proc$personas_hogar
ap_proc$ingresos_pc <- trunc(ap_proc$ingresos_pc)
# ---- Descripción variables nuevas ----
# ingreso
summary(ap_proc$ingresos)
# ingreso per capita
summary(ap_proc$ingresos_pc)
#---- Etiquetado variables nuevas ----
#ingreso
ap_proc$ingresos <- set_label(x = ap_proc$ingresos, label = "Ingresos del hogar")
# ingreso per capita
ap_proc$ingresos_pc <- set_label(x = ap_proc$ingresos_pc, label = "Ingreso per capita")
# Cuestionario apoderados
frq(ap_proc$educ)
# Cuestionario apoderados
ap_proc$educ <- set_na(ap_proc$educ, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$educ <- set_label(x = ap_proc$educ, label = "Educacion del apoderado")
# Cuestionario apoderados
frq(ap_proc$educ)
# Edad apoderados
frq(ap_proc$nacimiento)
ap_proc$nacimiento[ap_proc$nacimiento == 9999] <- NA
ap_proc$nacimiento[ap_proc$nacimiento > 1992] <- NA
ap_proc$nacimiento <- set_label(x = ap_proc$nacimiento, label = "Nacimiento apoderado")
# Edad apoderados
frq(ap_proc$nacimiento)
# Crear variable edad
ap_proc$edad <- 2019 - ap_proc$nacimiento
# ---- Descriptivo nueva variable ----
summary(ap_proc$edad)
# ---- Etiquetado variables nuevas ----
ap_proc$edad <- set_label(x = ap_proc$edad, label = "Edad apoderado")
# Genero apoderados
frq(ap_proc$genero)
# Genero apoderados
ap_proc$genero <- set_na(ap_proc$genero, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Genero apoderados
ap_proc$genero <- set_label(x = ap_proc$genero, label = "Genero apoderados")
# Genero apoderados
frq(ap_proc$genero)
# Posición política apoderados
frq(ap_proc$pos_pol)
summary(ap_proc$pos_pol)
# Posicion politica apoderados
ap_proc$pos_pol[ap_proc$pos_pol == 8 | ap_proc$pos_pol == 9] <- 10
ap_proc$pos_pol <- set_labels(ap_proc$pos_pol,
labels=c("Derecha" = 1,
"Centro derecha" = 2,
"Centro" = 3,
"Centro Izquierda" = 4,
"Izquierda" = 5,
"Independiente" = 6,
"Ninguna" = 7,
"Ns/Nr"=10)) #Etiquetado categorías
# Posición política apoderados
ap_proc$pos_pol <- set_label(x = ap_proc$pos_pol, label = "Posicion politica apoderados")
# Posición política apoderados
frq(ap_proc$pos_pol)
summary(ap_proc$pos_pol)
# Cuestionario apoderados
frq(ap_proc$libros_hogar)
# Cuestionarios apoderados
ap_proc$libros_hogar <- set_na(ap_proc$libros_hogar, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$libros_hogar <- set_label(x = ap_proc$libros_hogar, label = "Libros en el hogar apoderados")
# Cuestionario apoderados
frq(ap_proc$libros_hogar)
# Cuestionario apoderados
frq(ap_proc$region)
# Cuestionario apoderados
ap_proc$region <- set_label(x = ap_proc$region, label = "Region")
# Cuestionario apoderados
frq(ap_proc$recompensa_hijos)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_na(ap_proc$recompensa_hijos, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_label(x = ap_proc$recompensa_hijos, label = "Recompensa en la escuela apoderados")
# Cuestionario apoderados
frq(ap_proc$recompensa_hijos)
frq(ap_proc$personas_hogar)
ap_proc$personas_hogar[ap_proc$personas_hogar == 999] <- NA
ap_proc$personas_hogar <- set_label(x = ap_proc$personas_hogar, label = "Cantidad de personas en el hogar")
frq(ap_proc$personas_hogar)
# Ingresos a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_esc = mean(ingresos, na.rm = T))
# Ingresos per capita a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_pc_esc = mean(ingresos, na.rm = T))
#---- Descriptivos variables nuevas----
# Ingresos a nivel escuela
summary(ap_proc$ingresos_esc)
# Ingresos per capita a nivel escuela
summary(ap_proc$ingresos_pc_esc)
#---- Etiquetado variables nuevas----
# Ingresos a nivel escuela
ap_proc$ingresos_esc <- set_label(x = ap_proc$ingresos_esc, label = "Ingresos por escuela")
# Ingresos per capita a nivel escuela
ap_proc$ingresos_pc_esc <- set_label(x = ap_proc$ingresos_pc_esc, label = "Ingreso per capita por escuela")
# Construcción educación terciara apoderado por escuela
ap_proc$univ<- ifelse(ap_proc$educ==4,1,0)
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(univ_esc = mean(univ))
# ---- Descriptivos nuevas variables ----
frq(ap_proc$univ)
summary(ap_proc$univ_esc)
#---- Etiquetado nuevas variables ----
ap_proc$univ <- set_label(x = ap_proc$univ, label = "Educacion terciaria apoderados") # Etiquetado variable
ap_proc$univ <- set_labels(ap_proc$univ,
labels=c( "Universitario"=1,
"No universitario"=0)) #Etiquetado categorias
ap_proc$univ_esc <- set_label(x = ap_proc$univ_esc, label = "Porcentaje ed. terciaria por escuela")
# Cuesitionarios apoderados
frq(ap_proc$dependencia)
summary(ap_proc$dependencia)
# Construccion heterogeneidad
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(heterogen_esc = sd(ingresos))
#---- Descriptivo variables nuevas ----
summary(ap_proc$heterogen_esc)
#---- Etiquetado variables nuevas ----
ap_proc$heterogen_esc <- set_label(x = ap_proc$heterogen_esc, label = "Heterogeneidad de la escuela")
# Join
ap_est <- left_join(x = est_proc,y = ap_proc,by =c("folio"="folio"),suffix=c("_est","_ap"))
# Tabla general
print(dfSummary(ap_est, headings = FALSE,varnumbers = F),method = "render")
# Guardar base de datos conjunta
save(ap_est, file = "../input/data/ap_est.RData")
# Guardar base de datos apoderados
save(ap_proc, file = "../input/data/ap_proc.RData")
# Guardar base de datos estudiantes
save(est_proc, file = "../input/data/est_proc.RData")
View(ap_est)
View(ap_est)
xaringan:::inf_mr()
xaringan:::inf_mr()
knitr::opts_chunk$set(echo = TRUE, warning = FALSE)
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, SciViews, summarytools)
# Bases de apoderados.
ap <- haven::read_dta("https://github.com/formacionciudadana/data-paces/raw/main/docs/paces/data/base_apoderadosv2.dta")
# Base de estudiantes.
est <- haven::read_dta("https://github.com/formacionciudadana/data-paces/raw/main/docs/paces/data/base_estudiantesv2.dta")
# Seleccionar  y renombrar variables de la base de datos de apoderados
ap_proc <- ap %>% dplyr::select(rbd = RBD,
folio = FOLIO_EST,
region = REGION,
dependencia = Dependencia,
pos_pol = P23,
genero = P39,
nacimiento = P40A,
personas_hogar = P41,
educ = P45,
ingresos_tramos = P55,
libros_hogar = P47,
perc_trabajo_duro = P9D,
perc_esfuerzo = P10D,
recompensa_hijos = P10C
)
# Seleccionar y renonbrar variables de la base de datos de estudiantes.
est_proc <- est  %>% dplyr::select(rbd = RBD,
region = REGION,
folio = FOLIO,
dependencia = Dependencia,
pos_pol = P59,
genero = P58,
educ_padre = P66,
educ_madre = P67,
libros_hogar = P68,
perc_trabajo_duro = P24D,
perc_esfuerzo = P25D,
prom_obt = P27,
prom_mer = P28,
sj_direct = P29,
recompensa = P25C
)
frq(est_proc$perc_trabajo_duro) # Frecuencias
est_proc$perc_trabajo_duro <- set_na(est_proc$perc_trabajo_duro, na = c(5,9), drop.levels = TRUE, as.tag = FALSE) # Transformar a NA
est_proc$perc_trabajo_duro <- set_label(x = est_proc$perc_trabajo_duro,label = "Percepcion meritocracia: Importancia trabajo duro estudiantes") # Etiquetar
frq(est_proc$perc_trabajo_duro) # Frecuencias post recodificación
frq(est_proc$perc_esfuerzo)
est_proc$perc_esfuerzo <- set_na(est_proc$perc_esfuerzo, na = c(5,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$perc_esfuerzo <- set_label(x = est_proc$perc_esfuerzo, label = "Percepcion meritocracia: Esfuerzo para salir adelante estudiantes")
frq(est_proc$perc_esfuerzo)
# Promedio obtenido
summary(est_proc$prom_obt) # Descriptivo
frq(est_proc$prom_obt)
# Promedio merecido
summary(est_proc$prom_mer)
frq(est_proc$prom_mer)
# Promedio obtenido
est_proc$prom_obt[est_proc$prom_obt == 99] <- NA
est_proc$prom_obt[est_proc$prom_obt < 1 | est_proc$prom_obt > 7] <- NA
# Promedio merecido
est_proc$prom_mer[est_proc$prom_mer == 99] <- NA
est_proc$prom_mer[est_proc$prom_mer < 1 | est_proc$prom_mer > 7] <- NA
# Promedio obtenido
est_proc$prom_obt <- set_label(x = est_proc$prom_obt, label = "Promedio obtenido")
# Promedio merecido
est_proc$prom_mer <- set_label(x = est_proc$prom_mer, label = "Promedio merecido")
# Promedio obtenido
summary(est_proc$prom_obt) # Descriptivo
frq(est_proc$prom_obt)
# Promedio merecido
summary(est_proc$prom_mer)
frq(est_proc$prom_mer)
# Cálculo sentido justicia original
est_proc$sj_indirect_ln <-  ln(est_proc$prom_obt/est_proc$prom_mer)
# Cálculo sentido justicia sin ln
est_proc$sj_indirect_noln <-  est_proc$prom_obt/est_proc$prom_mer
##### ---- Descriptivos variables nuevas ----
# Sentido de justicia
summary(est_proc$sj_indirect_ln)
# Sentido de justicia sin ln
summary(est_proc$sj_indirect_noln)
##### ---- Etiquetado varibles nuevas ----
# Sentido de justicia
est_proc$sj_indirect_ln <- set_label(x = est_proc$sj_indirect_ln, label = "Sentido de justicia indirecto")
# Sentido de justicia sin ln
est_proc$sj_indirect_noln <- set_label(x = est_proc$sj_indirect_ln, label = "Sentido de justicia indirecto SIN LN")
frq(est_proc$sj_direct)
summary(est_proc$sj_direct)
est_proc$sj_direct <- set_na(est_proc$sj_direct, na = c(4,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$sj_direct <- set_label(x = est_proc$sj_direct, label = "Sentido de justicia directo")
# Cuestionario estudiantes
frq(est_proc$educ_madre)
frq(est_proc$educ_padre)
# Cuestionario estudiantes
est_proc$educ_madre <- set_na(est_proc$educ_madre, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
est_proc$educ_padre <- set_na(est_proc$educ_padre, na = c(8,9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$educ_madre <- set_label(x = est_proc$educ_madre, label = "Educacion de la madre")
est_proc$educ_padre <- set_label(x = est_proc$educ_padre, label = "Educacion de la madre")
# Cuestionario estudiantes
frq(est_proc$educ_madre)
frq(est_proc$educ_padre)
# Genero estudiantes
frq(est_proc$genero)
# Genero estudiantes
est_proc$genero <- set_na(est_proc$genero, na = c(4,9), drop.levels = TRUE, as.tag = FALSE)
# Genero estudiantes
est_proc$genero <- set_label(x = est_proc$genero, label = "Genero estudiantes")
# Genero estudiantes
frq(est_proc$genero)
# Posición política estudiantes
frq(est_proc$pos_pol)
summary(est_proc$pos_pol)
# Posición política estudiantes
est_proc$pos_pol[est_proc$pos_pol == 8 | est_proc$pos_pol == 9] <- 10
est_proc$pos_pol <- set_labels(est_proc$pos_pol,
labels=c("Derecha" = 1,
"Centro derecha" = 2,
"Centro" = 3,
"Centro Izquierda" = 4,
"Izquierda" = 5,
"Independiente" = 6,
"Ninguna" = 7,
"Ns/Nr"=10)) #Etiquetado categorías
est_proc$pos_pol<- set_na(est_proc$pos_pol, na = c(88), drop.levels = TRUE, as.tag = FALSE)
# Posición política estudiantes
est_proc$pos_pol <- set_label(x = est_proc$pos_pol, label = "Posicion politica estudiantes")
# Posición política estudiantes
frq(est_proc$pos_pol)
summary(est_proc$pos_pol)
# Cuestionario estudiantes
frq(est_proc$libros_hogar)
#Cuestionario estudiantes
est_proc$libros_hogar <- set_na(est_proc$libros_hogar, na = c(9,8), drop.levels = TRUE, as.tag = FALSE)
# Cuestionaro estudiantes
est_proc$libros_hogar <- set_label(x = est_proc$libros_hogar, label = "Libros en el hogar estudiantes")
# Cuestionario estudiantes
frq(est_proc$libros_hogar)
# Cuestionario estudiantes
frq(est_proc$region)
# Cuestionario estudiantes
est_proc$region <- set_label(x = est_proc$region, label = "Region")
# Cuestionario estudiante
frq(est_proc$recompensa)
# Cuestionario estudiantes
est_proc$recompensa <- set_na(est_proc$recompensa, na = c(5,9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario estudiantes
est_proc$recompensa <- set_label(x = est_proc$recompensa, label = "Recompensa en la escuela estudiantes")
# Cuestionario estudiante
frq(est_proc$recompensa)
# Cuestionario estudiantes
frq(est_proc$dependencia)
summary(est_proc$dependencia)
frq(ap_proc$perc_trabajo_duro)
ap_proc$perc_trabajo_duro <- set_na(ap_proc$perc_trabajo_duro, na = c(9), drop.levels = TRUE, as.tag = FALSE)
ap_proc$perc_trabajo_duro <- set_label(x = ap_proc$perc_trabajo_duro,label = "Percepcion meritocracia: Importancia trabajo duro apoderados")
frq(ap_proc$perc_trabajo_duro)
frq(ap_proc$perc_esfuerzo)
ap_proc$perc_esfuerzo <- set_na(ap_proc$perc_esfuerzo, na = c(9), drop.levels = TRUE, as.tag = FALSE)
ap_proc$perc_esfuerzo <- set_label(x = ap_proc$perc_esfuerzo, label = "Percepcion meritocracia: Esfuerzo para salir adelante apoderados")
frq(ap_proc$perc_esfuerzo)
frq(ap_proc$ingresos_tramos)
ap_proc$ingresos_tramos <- set_na(ap_proc$ingresos_tramos, na = c(12,13), drop.levels = TRUE, as.tag = FALSE)
ap_proc$ingresos_tramos <- set_label(x = ap_proc$ingresos_tramos,label = "Ingresos del hogar en tramos")
frq(ap_proc$ingresos_tramos)
# Construcción ingresos numerico
ap_proc$ingresos[ap_proc$ingresos_tramos == 1] <- 50500
ap_proc$ingresos[ap_proc$ingresos_tramos == 2] <- 117500
ap_proc$ingresos[ap_proc$ingresos_tramos == 3] <- 156500
ap_proc$ingresos[ap_proc$ingresos_tramos == 4] <- 201500
ap_proc$ingresos[ap_proc$ingresos_tramos == 5] <- 257500
ap_proc$ingresos[ap_proc$ingresos_tramos == 6] <- 324500
ap_proc$ingresos[ap_proc$ingresos_tramos == 7] <- 403000
ap_proc$ingresos[ap_proc$ingresos_tramos == 8] <- 724000
ap_proc$ingresos[ap_proc$ingresos_tramos == 9] <- 1500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 10] <- 2500000
ap_proc$ingresos[ap_proc$ingresos_tramos == 11] <- 3500000
# Construcción ingreso per capita
ap_proc$ingresos_pc <- ap_proc$ingresos/ap_proc$personas_hogar
ap_proc$ingresos_pc <- trunc(ap_proc$ingresos_pc)
# ---- Descripción variables nuevas ----
# ingreso
summary(ap_proc$ingresos)
# ingreso per capita
summary(ap_proc$ingresos_pc)
#---- Etiquetado variables nuevas ----
#ingreso
ap_proc$ingresos <- set_label(x = ap_proc$ingresos, label = "Ingresos del hogar")
# ingreso per capita
ap_proc$ingresos_pc <- set_label(x = ap_proc$ingresos_pc, label = "Ingreso per capita")
# Cuestionario apoderados
frq(ap_proc$educ)
# Cuestionario apoderados
ap_proc$educ <- set_na(ap_proc$educ, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$educ <- set_label(x = ap_proc$educ, label = "Educacion del apoderado")
# Cuestionario apoderados
frq(ap_proc$educ)
# Edad apoderados
frq(ap_proc$nacimiento)
ap_proc$nacimiento[ap_proc$nacimiento == 9999] <- NA
ap_proc$nacimiento[ap_proc$nacimiento > 1992] <- NA
ap_proc$nacimiento <- set_label(x = ap_proc$nacimiento, label = "Nacimiento apoderado")
# Edad apoderados
frq(ap_proc$nacimiento)
# Crear variable edad
ap_proc$edad <- 2019 - ap_proc$nacimiento
# ---- Descriptivo nueva variable ----
summary(ap_proc$edad)
# ---- Etiquetado variables nuevas ----
ap_proc$edad <- set_label(x = ap_proc$edad, label = "Edad apoderado")
# Genero apoderados
frq(ap_proc$genero)
# Genero apoderados
ap_proc$genero <- set_na(ap_proc$genero, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Genero apoderados
ap_proc$genero <- set_label(x = ap_proc$genero, label = "Genero apoderados")
# Genero apoderados
frq(ap_proc$genero)
# Posición política apoderados
frq(ap_proc$pos_pol)
summary(ap_proc$pos_pol)
# Posicion politica apoderados
ap_proc$pos_pol[ap_proc$pos_pol == 8 | ap_proc$pos_pol == 9] <- 10
ap_proc$pos_pol <- set_labels(ap_proc$pos_pol,
labels=c("Derecha" = 1,
"Centro derecha" = 2,
"Centro" = 3,
"Centro Izquierda" = 4,
"Izquierda" = 5,
"Independiente" = 6,
"Ninguna" = 7,
"Ns/Nr"=10)) #Etiquetado categorías
# Posición política apoderados
ap_proc$pos_pol <- set_label(x = ap_proc$pos_pol, label = "Posicion politica apoderados")
# Posición política apoderados
frq(ap_proc$pos_pol)
summary(ap_proc$pos_pol)
# Cuestionario apoderados
frq(ap_proc$libros_hogar)
# Cuestionarios apoderados
ap_proc$libros_hogar <- set_na(ap_proc$libros_hogar, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$libros_hogar <- set_label(x = ap_proc$libros_hogar, label = "Libros en el hogar apoderados")
# Cuestionario apoderados
frq(ap_proc$libros_hogar)
# Cuestionario apoderados
frq(ap_proc$region)
# Cuestionario apoderados
ap_proc$region <- set_label(x = ap_proc$region, label = "Region")
# Cuestionario apoderados
frq(ap_proc$recompensa_hijos)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_na(ap_proc$recompensa_hijos, na = c(9), drop.levels = TRUE, as.tag = FALSE)
# Cuestionario apoderados
ap_proc$recompensa_hijos <- set_label(x = ap_proc$recompensa_hijos, label = "Recompensa en la escuela apoderados")
# Cuestionario apoderados
frq(ap_proc$recompensa_hijos)
frq(ap_proc$personas_hogar)
ap_proc$personas_hogar[ap_proc$personas_hogar == 999] <- NA
ap_proc$personas_hogar <- set_label(x = ap_proc$personas_hogar, label = "Cantidad de personas en el hogar")
frq(ap_proc$personas_hogar)
# Ingresos a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_esc = mean(ingresos, na.rm = T))
# Ingresos per capita a nivel escuela
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(ingresos_pc_esc = mean(ingresos, na.rm = T))
#---- Descriptivos variables nuevas----
# Ingresos a nivel escuela
summary(ap_proc$ingresos_esc)
# Ingresos per capita a nivel escuela
summary(ap_proc$ingresos_pc_esc)
#---- Etiquetado variables nuevas----
# Ingresos a nivel escuela
ap_proc$ingresos_esc <- set_label(x = ap_proc$ingresos_esc, label = "Ingresos por escuela")
# Ingresos per capita a nivel escuela
ap_proc$ingresos_pc_esc <- set_label(x = ap_proc$ingresos_pc_esc, label = "Ingreso per capita por escuela")
# Construcción educación terciara apoderado por escuela
ap_proc$univ<- ifelse(ap_proc$educ==4,1,0)
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(univ_esc = mean(univ))
# ---- Descriptivos nuevas variables ----
frq(ap_proc$univ)
summary(ap_proc$univ_esc)
#---- Etiquetado nuevas variables ----
ap_proc$univ <- set_label(x = ap_proc$univ, label = "Educacion terciaria apoderados") # Etiquetado variable
ap_proc$univ <- set_labels(ap_proc$univ,
labels=c( "Universitario"=1,
"No universitario"=0)) #Etiquetado categorias
ap_proc$univ_esc <- set_label(x = ap_proc$univ_esc, label = "Porcentaje ed. terciaria por escuela")
# Cuesitionarios apoderados
frq(ap_proc$dependencia)
summary(ap_proc$dependencia)
# Construccion heterogeneidad
ap_proc <- ap_proc %>%
group_by(rbd) %>%
mutate(heterogen_esc = sd(ingresos))
#---- Descriptivo variables nuevas ----
summary(ap_proc$heterogen_esc)
#---- Etiquetado variables nuevas ----
ap_proc$heterogen_esc <- set_label(x = ap_proc$heterogen_esc, label = "Heterogeneidad de la escuela")
# Join
ap_est <- left_join(x = est_proc,y = ap_proc,by =c("folio"="folio"),suffix=c("_est","_ap"))
# Tabla general
print(dfSummary(ap_est, headings = FALSE,varnumbers = F),method = "render")
# Guardar base de datos conjunta
save(ap_est, file = "../input/data/ap_est.RData")
# Guardar base de datos apoderados
save(ap_proc, file = "../input/data/ap_proc.RData")
# Guardar base de datos estudiantes
save(est_proc, file = "../input/data/est_proc.RData")
knitr::opts_chunk$set(echo = TRUE)
# Plot Likert: perc. trabajo duro apoderados y estudiantes
baselik<- ap_est %>% select(perc_trabajo_duro_est,perc_trabajo_duro_ap)
# short var labels
items <- c("Percepcion trabajo duro estudiantes", "Percepcion trabajo duro apoderados")
# cambiar orden para la leyenda
labels= c("Nada Importante", "Poco Importante", "Importante", "Muy Importante")  ### E
#save
png("../output/images/Plot-lik-trabajoduro.png", width = 400, height = 600)
sjPlot::plot_likert(baselik,
axis.labels   = items,
legend.labels = labels,
legend.pos = "bottom",
#cat.neutral   = , # identifica a indiferentes
geom.colors   = c("#9ECAE1", "#6BAED6", "#4292C6",
"#2171B5"), # colorbrewer2.org
sort.frq      = "neg.asc", # sort descending)
title         = "Percepción de meritocracia padres e hijos",
intercept.line.color = "white", # vertical middle
expand.grid   = F, # no inner margins in plot
show.n        = FALSE, # hide N's in axis labels
grid.range    = 1.8,
geom.size = 0.6, values = "sum.outside")
dev.off()
# Plot Likert: perc. trabajo duro apoderados y estudiantes
baselik<- ap_est %>% select(perc_trabajo_duro_est,perc_trabajo_duro_ap)
# short var labels
items <- c("Percepcion trabajo duro estudiantes", "Percepcion trabajo duro apoderados")
# cambiar orden para la leyenda
labels= c("Nada Importante", "Poco Importante", "Importante", "Muy Importante")  ### E
#save
png("../output/images/Plot-lik-trabajoduro.png", width = 400, height = 400)
sjPlot::plot_likert(baselik,
axis.labels   = items,
legend.labels = labels,
legend.pos = "bottom",
#cat.neutral   = , # identifica a indiferentes
geom.colors   = c("#9ECAE1", "#6BAED6", "#4292C6",
"#2171B5"), # colorbrewer2.org
sort.frq      = "neg.asc", # sort descending)
title         = "Percepción de meritocracia padres e hijos",
intercept.line.color = "white", # vertical middle
expand.grid   = F, # no inner margins in plot
show.n        = FALSE, # hide N's in axis labels
grid.range    = 1.8,
geom.size = 0.6, values = "sum.outside")
dev.off()
